solution(List,L1,L2):-
    % Получили лист L1
    list_to_set(List,L1),
    % Получили лист L2
    getL2(List,L2).

% Получаем лист L2
getL2([],[]):-!.
getL2([Head|Tail],[CountHead|ListStatisticElementsWithoutCountHead]):-
    % Считаем количество данного элемента и получаем лист без этого элемента
    count(Head,[Head|Tail],ListWithoutHead,CountHead),
    % Идем дальше
    getL2(ListWithoutHead,ListStatisticElementsWithoutCountHead).

count(X,List,ListWithoutX,CountX):-
    % Вспомогательная функция
    count(X,List,ListWithoutX,0,CountX),!.
count(_,[],[],CountX,CountX):-!.
count(X,[X|Tail],ListWithoutX,IntermediateCountX,CountX):-!,
    % Если этот элемент = голове, то +1
    IntermediateCountXInc is IntermediateCountX + 1,
    % Идем дальше искать в хвосте
    count(X,Tail,ListWithoutX,IntermediateCountXInc,CountX),!.
count(X,[Head|Tail],[Head|NewTail],IntermediateCountXInc,CountX):-
    % Если этот элемент не= голове, то добавляем рассматриваемый элемент в результирующий список
    count(X,Tail,NewTail,IntermediateCountXInc,CountX).
